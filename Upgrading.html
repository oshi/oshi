<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/Upgrading.md at 2023-07-02
 | Rendered using Apache Maven Fluido Skin 1.11.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Operating System and Hardware Information &#x2013; Guide to upgrading from OSHI 5.x to 6.x</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.2.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.2.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">User guide <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Overview">Overview</a></li>
            <li><a href="oshi-core-java11/apidocs/" title="Javadocs">Javadocs</a></li>
            <li><a href="FAQ.html" title="Frequently Asked Questions">Frequently Asked Questions</a></li>
            <li><a href="Performance.html" title="Performance Considerations">Performance Considerations</a></li>
            <li><a title="Major Version Breaking Changes">Major Version Breaking Changes</a></li>
            <li><a href="SampleOutput.html" title="Sample Output">Sample Output</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">GitHub <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="https://github.com/oshi/oshi" title="OSHI on GitHub">OSHI on GitHub</a></li>
            <li><a href="https://github.com/oshi/oshi/issues" title="Issues">Issues</a></li>
            <li><a href="https://github.com/oshi/oshi/releases" title="Releases">Releases</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="index.html" title="About">About</a></li>
                  <li><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="modules.html" title="Project Modules">Project Modules</a></li>
                  <li><a href="plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="summary.html" title="Summary">Summary</a></li>
                  <li><a href="team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="changelog.html" title="Change Log">Change Log</a></li>
                  <li><a href="file-activity.html" title="File Activity">File Activity</a></li>
                  <li><a href="dev-activity.html" title="Developer Activity">Developer Activity</a></li>
                  <li><a href="checkstyle-aggregate.html" title="Checkstyle">Checkstyle</a></li>
                  <li><a href="xref/index.html" title="Source Xref">Source Xref</a></li>
                  <li><a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a></li>
                  <li><a href="surefire-report.html" title="Surefire">Surefire</a></li>
                  <li><a href="jacoco-aggregate/index.html" title="JaCoCo Aggregate">JaCoCo Aggregate</a></li>
                  <li><a href="dependency-updates-aggregate-report.html" title="Dependency Updates Aggregate Report">Dependency Updates Aggregate Report</a></li>
                  <li><a href="dependency-updates-report.html" title="Dependency Updates Report">Dependency Updates Report</a></li>
                  <li><a href="plugin-updates-aggregate-report.html" title="Plugin Updates Aggregate Report">Plugin Updates Aggregate Report</a></li>
                  <li><a href="plugin-updates-report.html" title="Plugin Updates Report">Plugin Updates Report</a></li>
                  <li><a href="property-updates-aggregate-report.html" title="Property Updates Aggregate Report">Property Updates Aggregate Report</a></li>
                  <li><a href="property-updates-report.html" title="Property Updates Report">Property Updates Report</a></li>
                  <li><a href="dependency-check-report.html" title="dependency-check:aggregate">dependency-check:aggregate</a></li>
              </ul>
            </li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="oshi-core/index.html" title="oshi-core">oshi-core</a></li>
            <li><a href="oshi-demo/index.html" title="oshi-demo">oshi-demo</a></li>
            <li><a href="oshi-core-java11/index.html" title="oshi-core-java11">oshi-core-java11</a></li>
            <li><a href="oshi-dist/index.html" title="oshi-dist">oshi-dist</a></li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>Operating System and Hardware Information</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-07-02<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 6.4.4</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">User guide</li>
    <li><a href="index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="oshi-core-java11/apidocs/" title="Javadocs"><span class="none"></span>Javadocs</a></li>
    <li><a href="FAQ.html" title="Frequently Asked Questions"><span class="none"></span>Frequently Asked Questions</a></li>
    <li><a href="Performance.html" title="Performance Considerations"><span class="none"></span>Performance Considerations</a></li>
    <li class="active"><a><span class="none"></span>Major Version Breaking Changes</a></li>
    <li><a href="SampleOutput.html" title="Sample Output"><span class="none"></span>Sample Output</a></li>
   <li class="nav-header">GitHub</li>
    <li><a href="https://github.com/oshi/oshi" class="externalLink" title="OSHI on GitHub"><span class="none"></span>OSHI on GitHub</a></li>
    <li><a href="https://github.com/oshi/oshi/issues" class="externalLink" title="Issues"><span class="none"></span>Issues</a></li>
    <li><a href="https://github.com/oshi/oshi/releases" class="externalLink" title="Releases"><span class="none"></span>Releases</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="oshi-core/index.html" title="oshi-core"><span class="none"></span>oshi-core</a></li>
    <li><a href="oshi-demo/index.html" title="oshi-demo"><span class="none"></span>oshi-demo</a></li>
    <li><a href="oshi-core-java11/index.html" title="oshi-core-java11"><span class="none"></span>oshi-core-java11</a></li>
    <li><a href="oshi-dist/index.html" title="oshi-dist"><span class="none"></span>oshi-dist</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Guide to upgrading from OSHI 5.x to 6.x</h1>
<p>OSHI 6.0.0 is functionally equivalent to 5.8.7, with minor API updates as noted below.</p><section>
<h2><a name="API_Changes"></a>API Changes</h2><section>
<h3><a name="Deprecated_method_removal"></a>Deprecated method removal</h3>
<p>The deprecated methods <code>getProcesses(int limit, ProcessSort sort)</code>, <code>getChildProcesses(int parentPid, int limit, ProcessSort sort)</code>, and the enum <code>ProcessSort</code> were removed, replaced by methods leveraging constants in the <code>ProcessSorting</code> class.</p>
<p>The deprecated method <code>getCurrentPlatformEnum()</code> was removed from <code>SystemInfo</code> and the deprecated <code>MACOSX</code> value has been removed from <code>PlatformEnum</code>.</p></section><section>
<h3><a name="Changed_return_values.2Ftypes"></a>Changed return values/types</h3>
<p>The value returned from <code>MacOSProcess</code> and <code>LinuxOSProcess</code> method <code>getCommandLine()</code> has been changed from null-delimited string to space-delimited string. Due to potential truncation on some operating systems, parsing this method should not be relied upon. The <code>getArguments()</code> method is the preferred alternative to obtain a list of the command line arguments.</p>
<p>The method <code>getServices()</code> now returns a <code>List&lt;OSService&gt;</code> rather than an array.</p>
<p>The value returned from <code>NetworkIF</code> method <code>getMTU()</code> has been changed from an <code>int</code> to a <code>long</code>. This impacts Windows users who had special treatment of local interfaces which previously matched the JDK's <code>NetworkInterface</code> return of a 32-bit -1 value. This value is now a long
representing the max unsigned integer value.</p>
<h1>Guide to upgrading from OSHI 4.x to 5.x</h1>
<p>OSHI 5.0.0-5.1.2 releases are functionally equivalent to 4.7.0-4.8.2 releases,
with three categories of changes supporting full thread safety:</p>
<ul>

<li>Remove setters from API.</li>
<li>Change getters which return arrays of objects to return unmodifiable lists.</li>
<li>Remove deprecated code.</li>
</ul>
<p>For users of JPMS, OSHI 5.2.0 and 4.9.0 were released with an Automatic Module Name of <code>com.github.oshi</code>,
which may differ from the <code>oshi.core</code> module name previously resolved automatically.</p></section></section><section>
<h2><a name="API_Changes"></a>API Changes</h2><section>
<h3><a name="Setter_removal"></a>Setter removal</h3>
<p>The <code>NetworkIF</code>, <code>HWDiskStore</code>, <code>OSFileStore</code>, and <code>OSProcess</code> classes are now interfaces, with setters removed.</p>
<p>The <code>HWPartition</code> class is now immutable, with setters removed.</p></section><section>
<h3><a name="UnmodifiableList_return_types"></a>UnmodifiableList return types</h3>
<p>The <code>HardwareAbstractionLayer</code> methods <code>getNetworkIFs()</code>, <code>getDisks()</code>, <code>getPowerSources()</code>,
<code>getDisplays()</code>, <code>getSoundCards()</code>, <code>getGraphicsCards()</code>, <code>getUsbDevices()</code>,
the <code>HWDiskstore</code> method <code>getPartitions()</code>, the <code>FileSystem</code> method <code>getFileStores()</code>,
the <code>GlobalMemory</code> method <code>getPhysicalMemory()</code>, the <code>OperatingSystem</code> methods for <code>getProcesses()</code>,
the <code>CentralProcessor</code> method <code>getLogicalProcessors()</code>, and the <code>UsbDevice</code> method <code>getConnectedDevices()</code>
now return an <code>UnmodifiableList</code> instead of an array.</p></section><section>
<h3><a name="Method_changes"></a>Method changes</h3>
<p>The <code>OperatingSystem</code> methods fetching <code>OSProcess</code> information using a <code>slowFields</code> boolean have been removed,
as the behavior they enabled is now done by default. Windows users should note the addition of a configurable
parameter optionally allowing WMI caching for improved performance of <code>OsProcess#getCommandLine</code>.</p>
<p>The <code>OperatingSystem</code> method <code>getProcessAffinityMask()</code> is now on the <code>OSProcess</code> object as <code>getAffinityMask()</code>.</p>
<p>The <code>OSFileStore</code> method <code>updateAtrributes()</code> is now spelled correctly as <code>updateAttributes()</code>.</p></section><section>
<h3><a name="Deprecated_method_removal"></a>Deprecated method removal</h3>
<p>The deprecated <code>OperatingSystemVersion</code> interface and its getter <code>OperatingSystem</code>.<code>getVersion</code> were removed.
Its <code>getVersion()</code>, <code>getCodeName()</code>, and <code>getBuildNumber()</code> methods are available on the object returned
from the method <code>getVersionInfo()</code>.</p>
<p>The deprecated <code>CentralProcessor</code> methods <code>getVendor()</code>, <code>getName()</code>, <code>getFamily()</code>, <code>getModel()</code>,
<code>getStepping()</code>, <code>getProcessor()</code>, <code>getIdentifier()</code>, <code>getVendorFreq()</code>, and <code>isCpu64bit</code> were removed.
The equivalent methods are available on the object returned from <code>getProcessorIdentifier()</code>.</p>
<p>The deprecated <code>PowerSource</code> methods <code>getRemainingCapacity()</code> and <code>getTimeRemaining()</code> were removed,
replaced by <code>getRemainingCapacityPercent()</code> and <code>getTimeRemainingEstimated()</code>.</p>
<p>The deprecated <code>OSProcess</code> method <code>calculateCpuPercent()</code> was removed, replaced by <code>getProcessCpuLoadCumulative()</code>.</p>
<h1>Guide to upgrading from OSHI 3.x to 4.x</h1>
<p>OSHI 4.0 requires minimum Java 8 compatibility.</p>
<p>The <code>oshi-json</code> artifact has been completely removed. It is trivial to obtain JSON output using the
<a class="externalLink" href="https://www.mkyong.com/java/jackson-2-convert-java-object-to-from-json/">Jackson ObjectMapper</a>.</p>
<p>There is a new <code>oshi-demo</code> artifact which will contain many &#x201c;how to&#x201d; classes
to demonstrate OSHI's capabilities and integration with other libraries. These classes are intended
as proof-of-concept only, and are not intended for production use.</p></section></section><section>
<h2><a name="API_Changes"></a>API Changes</h2>
<p><code>NetworkIF#getNetworkInterface()</code> is now <code>queryNetworkInterface()</code> to prevent
Jackson's ObjectMapper from attempting to serialize the returned object.</p>
<p>There is a new <code>VirtualMemory</code>class which is accessible with a getter from
<code>GlobalMemory</code>.  Methods associated with swap file usage were moved to this
new class.</p>
<p>The <code>CentralProcessor</code> setters were removed from the API. The methods
<code>getSystemCpuLoadBetweenTicks()</code> and <code>getProcessorCpuLoadBetweenTicks()</code> now take
an argument with the previous set of ticks, rather than internally saving the
previous call. This enables users to measure over a longer period or multiple
different periods.  The <code>getSystemCpuLoad()</code> method has been removed; users
running the Oracle JVM should use the  <code>OperatingSystemMXBean</code> method if
they desire this value.  The no-argument <code>getSystemLoadAverage()</code> has been
removed; users can call with an argument of 1 to obtain the same value.</p>
<p>The <code>getSystemUptime()</code> method was moved from the <code>CentralProcessor</code> class to
the <code>OperatingSystem</code> class.</p>
<p>The <code>NetworkIF#updateNetworkStats()</code> and <code>HWDiskStore#updateDiskStats()</code> methods
were renamed to <code>updateAttributes()</code> to conform to other similarly named methods
to permit update of individual elements of arrays.</p>
<h1>Guide to upgrading from OSHI 2.x to 3.x</h1>
<p>The most significant change in OSHI 3.0 is the separation of JSON output to a
separate artifact, filtering output using configurable properties. Users of
<code>oshi-core</code> who do not require JSON will find most of the API the same except
as noted below.  Those who use JSON will find improved functionality in the
<code>oshi-json</code> module.</p></section><section>
<h2><a name="API_Changes_-_oshi-core"></a>API Changes - oshi-core</h2>
<p>The <code>CentralProcessor</code>'s <code>getSystemIOWaitTicks()</code> and <code>getSystemIrqTicks()</code>
methods were removed. The <code>getSystemCpuLoadTicks()</code> now include the IOWait and
IRQ tick information previously reported by those methods, although Idle time
no longer includes IOWait, and System Time no longer includes IRQ ticks. The
<code>getProcessorCpuLoadTicks()</code> now includes per-processor IOWait and IRQ tick
information.</p>
<p>The <code>getFileSystem()</code> method was moved from the <code>HardwareAbstractionLayer</code> to
the <code>OperatingSystem</code>.  The <code>getFileStores()</code> method on the
<code>HardwareAbstractionLayer</code> was redundant with the same method on the
<code>FileSystem</code> class and was removed.</p>
<p>The <code>OSProcess</code> methods (<code>getProcesses()</code>, <code>getProcess()</code>, <code>getProcessId()</code>,
<code>getProcessCount()</code>, and <code>getThreadCount()</code>) were moved from the
<code>CentralProcessor</code> to the <code>OperatingSystem</code>.</p>
<p>The (<code>OperatingSystem</code>'s) <code>getProcesses()</code> method now takes two arguments, to
limit the number of results returned, and to sort the results.</p>
<p>The <code>HardwareAbstractionLayer</code>'s <code>getUsbDevices()</code> method now takes a boolean
argument which offers both the existing tree-based or a flat list format.</p>
<p>The <code>Networks</code> interface had an <code>updateNetworkStats()</code> method that was not
reachable from cross-platform code. That method is now on the <code>NetworkIF</code>
class.</p></section><section>
<h2><a name="API_Changes_-_oshi-json"></a>API Changes - oshi-json</h2>
<p>Decorator classes for the OSHI API which enable JSON functionality are now in
the <code>oshi.json.*</code> packages with the same API changes in the previous section.</p>
<p>JSON objects associated with the above method changes were updated:</p>
<ul>

<li><code>systemCpuLoadTicks</code> and <code>processorCpuLoadTicks</code> now have 7-element arrays
instead of 4, and the <code>systemIOWaitTicks</code> and <code>systemIrqTicks</code> elements have
been removed from the <code>processor</code> object.</li>
<li><code>fileSystem</code> is now an element of <code>operatingSystem</code> rather than <code>processor</code>.</li>
<li><code>fileStores</code> is now an element of <code>fileSystem</code> rather than <code>processor</code>.</li>
<li><code>processID</code>, <code>processCount</code>, <code>threadCount</code>, and <code>processes</code> are now
elements of <code>operatingSystem</code> rather than <code>processor</code>.</li>
</ul>
<p>While the existing <code>toJSON()</code> method remains and is backwards compatible, the
new API permits using a <code>java.util.Properties</code> object as an optional parameter
which will be persistent to future (no argument) calls to that method until
replaced.  See the <a href="FAQ.html">FAQ</a> for more information.</p>
<h1>Guide to upgrading from OSHI 1.x to 2.x</h1>
<p>Even though it's a major release, OSHI 2.0 functionality is identical to
1.5.2.  For the most part, the highest level APIs demonstrated in the test
classes have remained the same, except as documented below.  Several lower
level packages and classes have been moved and/or renamed.</p></section><section>
<h2><a name="Package_Changes"></a>Package Changes</h2>
<p>New packages <code>oshi.jna.platform.*</code> were created and code which extends
<code>com.sun.jna.Library</code> was moved into its respective platform library.  These
classes should be considered non-API as they may be removed if/when their
code is incorporated into the JNA project.</p>
<p>New packages <code>oshi.hardware.platform.*</code> were created and contain the
platform-specific implementations of interfaces in <code>oshi.hardware</code>, with
implementing classes renamed to prepend the platform name to the interface
name.  Similar renaming was done for implementations of <code>oshi.software.os</code>
in the respective <code>oshi.software.os.*</code> packages.</p></section><section>
<h2><a name="API_Changes"></a>API Changes</h2>
<p>The <code>Memory</code> interface was renamed <code>GlobalMemory</code> to avoid name conflict with
JNA's <code>Memory</code> class.</p>
<p>The <code>Processor</code> interface, which represented one of an array of logical
processor objects, was renamed <code>CentralProcessor</code> and represents the entire
System CPU which may contain multiple logical processors.  Methods applicable
to an individual logical processor were modified to return arrays.</p>
<p>The <code>HardwareAbstractionLayer</code>'s <code>getProcessors()</code> method was renamed to
<code>getProcessor()</code> and now returns a singular <code>CentralProcessor</code> object.</p>
<p>Specific changes to <code>CentralProcessor</code> methods:</p>
<ul>

<li>The constructor no longer takes a processor number argument and the
<code>getProcessorNumber()</code> method was removed</li>
<li>The deprecated <code>getLoad()</code> method was removed. Use
<code>getSystemCpuLoadBetweenTicks()</code>.</li>
<li>The <code>getProcessorCpuLoadBetweenTicks()</code> method now returns an array of
load values, one value for each logical processor.</li>
<li>The <code>getProcessorCpuLoadTicks()</code> method now returns a two dimensional
array; one array per logical processor, each containing the tick values
previously returned for a single processor.</li>
</ul></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2010&#x2013;2023
<a href="https://github.com/oshi/">oshi</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
